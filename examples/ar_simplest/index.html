<!DOCTYPE html>
<html lang="en">
  <head>
    <title>three.xr.js AR simplest example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
      body, html {
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
        -webkit-user-select: none;
        user-select: none;
      }
    </style>
  </head>
  <body>
    <script src="../../vendor/three.js"></script>
    <script src="../../vendor/webxr-polyfill.js"></script>
    <script src='../../three.xr.js'></script>
    <script>
      var clock = new THREE.Clock();

      var container;
      var renderer, camera, scene;
      var xrDisplays, xr;

      var cube;

      THREE.WebXRUtils.getDisplays().then(init);

      function init(displays) {
        xrDisplays = displays;

        container = document.createElement( 'div' );
        document.body.appendChild( container );
        
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera();
        scene.add( camera );

        renderer = new THREE.WebGLRenderer( { alpha: true } );
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.autoClear = false;
        renderer.setSize( window.innerWidth, window.innerHeight );
        container.appendChild( renderer.domElement );

        // Add custom content
        var geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);
        var material = new THREE.MeshNormalMaterial();
        cube = new THREE.Mesh(geometry, material);
        cube.position.set(0, 0, -1);
        scene.add (cube);
        // End custom content

        xr = new THREE.WebXRManager(xrDisplays, renderer, camera, scene, update);
        xr.startSession( false, true );
      }

      // Called once per frame, before render, to give the app a chance to update this.scene
      function update(frame) {
        var delta = clock.getDelta() * 60;
        cube.rotation.y += delta * 0.01;
      }
    </script>
  </body>
</html>